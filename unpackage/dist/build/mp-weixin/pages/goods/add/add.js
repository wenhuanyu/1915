(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/add/add"],{"1ff2":function(t,e,n){"use strict";n.r(e);var i=n("ca21"),o=n("ab40");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("5825");var u,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);e["default"]=c.exports},5825:function(t,e,n){"use strict";var i=n("c3e3"),o=n.n(i);o.a},ab40:function(t,e,n){"use strict";n.r(e);var i=n("c213"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},b6f3:function(t,e,n){"use strict";(function(t){n("2e6c");i(n("dc04"));var e=i(n("1ff2"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("97ff")["createPage"])},c213:function(t,e,n){"use strict";(function(t){function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{form:{name:"",cate_id:"",unit_id:"",bar_code:"",serial_num:"",marque:"",cost_price:"",price:"",remark:"",image:""},data:"",edit:"",button_text:"",remarkImage:"",goodList:[],gIndex:-1,shop_unit_list:[],uIndex:-1,cate_name:"",unit_name:""}},onLoad:function(e){var n=this;this.http({url:this.api.shopType,method:"POST",data:{uid:this.common.get("uid")},success:function(t){n.goodList=t}}),this.http({url:this.api.shop_unit,method:"POST",data:{uid:this.common.get("uid")},success:function(t){n.shop_unit_list=t}}),this.edit=e,e.data?(t.setNavigationBarTitle({title:"编辑商品"}),this.button_text="确定修改",this.data=JSON.parse(decodeURIComponent(e.data)),this.http({url:this.api.editShop,method:"POST",data:{uid:this.common.get("uid"),type:1,goods_id:this.data},success:function(t){n.form=t[0],n.unit_name=n.form.unit_name,""==n.unit_name&&(n.unit_name="请选择商品单位"),n.cate_name=n.form.cate_name,""==n.cate_name&&(n.cate_name="请选择商品分类"),n.gIndex=0,n.uIndex=0}})):this.button_text="确定添加"},methods:{changegoods:function(t){this.gIndex=t.target.value,this.form.cate_id=this.goodList[this.gIndex].name,this.cate_name=this.goodList[this.gIndex].name,console.log("e",t)},changeunit:function(t){this.uIndex=t.target.value,this.form.unit_id=this.shop_unit_list[this.uIndex].unit_name,this.unit_name=this.shop_unit_list[this.uIndex].unit_name},uploadImage:function(){var e=this;t.chooseImage({count:1,success:function(n){var i=n.tempFilePaths[0];t.uploadFile({url:e.common.baseUrl+e.api.upload,filePath:i,name:"file",success:function(n){var i=JSON.parse(n.data);1==i.code?e.form.image=i.data.url:t.showToast({title:"上传失败",icon:"none"})},fail:function(e){t.showToast({title:"上传失败,"+e,icon:"none"})}})}})},previewImage:function(t){var e=[];e[0]=this.form.image,wx.previewImage({current:0,urls:e})},deleteImage:function(t){this.form.image=""},qrcode:function(){var e=this;t.scanCode({success:function(t){e.form.bar_code=t.result}})},previous:function(){var e=getCurrentPages(),n=e[e.length-2];t.navigateBack({success:function(){n.onLoad()}})},add:function(){var e=this;this.form.unit_id=this.unit_name,this.form.cate_id=this.cate_name,this.edit.data?this.http({url:this.api.editShop,method:"POST",data:i({uid:this.common.get("uid"),type:2,goods_id:this.data},this.form),success:function(n){t.showToast({title:"编辑成功",icon:"none",duration:2e3}),setTimeout((function(){e.previous()}),500)}}):this.http({url:this.api.addShop,method:"POST",data:i({uid:this.common.get("uid")},this.form),success:function(n){t.showToast({title:"添加成功",icon:"none",duration:2e3}),setTimeout((function(){e.previous()}),500)}})}}};e.default=a}).call(this,n("d5d0")["default"])},c3e3:function(t,e,n){},ca21:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"3c6f"))}},o=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["b6f3","common/runtime","common/vendor"]]]);