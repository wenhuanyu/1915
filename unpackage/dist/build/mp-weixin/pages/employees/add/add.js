(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/employees/add/add"],{"0071":function(r,t,e){"use strict";(function(r){function e(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,i)}return e}function i(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach((function(t){n(r,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))}))}return r}function n(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function a(r,t){var e;if("undefined"===typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(e=o(r))||t&&r&&"number"===typeof r.length){e&&(r=e);var i=0,n=function(){};return{s:n,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(r){throw r},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){e=r[Symbol.iterator]()},n:function(){var r=e.next();return u=r.done,r},e:function(r){c=!0,a=r},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw a}}}}function o(r,t){if(r){if("string"===typeof r)return u(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(r,t):void 0}}function u(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={data:function(){return{form:{username:"",name:"",password:""},againPassword:"",data:"",edit:"",miniprogram:[],authorize:[],miniprogramArr:[],authorizeArr:[],miniprogramAllCheck:{name:"全选",value:"all",checked:!1},authorizeArrCheck:{name:"全选",value:"all",checked:!1}}},onLoad:function(r){var t=this;this.edit=r,this.http({url:this.api.miniprogram,method:"POST",data:{uid:this.common.get("uid")},success:function(r){t.miniprogram=r}}),this.http({url:this.api.authorize,method:"POST",data:{uid:this.common.get("uid")},success:function(r){t.authorize=r}}),r.data&&(this.data=JSON.parse(decodeURIComponent(r.data)),this.http({url:this.api.new_editStaff,method:"POST",data:{uid:this.common.get("uid"),type:1,staff_id:this.data.id},success:function(r){t.form.name=r.name,t.form.username=r.username,t.form.password=r.password,setTimeout((function(){var e,i=a(r.miniprogram);try{for(i.s();!(e=i.n()).done;){var n=e.value,o=String(n.id);t.miniprogramArr.includes(o)||t.miniprogramArr.push(o)}}catch(l){i.e(l)}finally{i.f()}var u,c=a(r.authorize);try{for(c.s();!(u=c.n()).done;){var s=u.value,h=String(s.id);t.authorizeArr.includes(h)||t.authorizeArr.push(h)}}catch(l){c.e(l)}finally{c.f()}t.miniprogramArr.length==t.miniprogram.length?t.miniprogramAllCheck.checked=!0:t.miniprogramAllCheck.checked=!1,t.authorizeArr.length==t.authorize.length?t.authorizeArrCheck.checked=!0:t.authorizeArrCheck.checked=!1}),50)}}))},methods:{changeCheck:function(r,t){"min"==r?(this.miniprogramArr=t.detail.value,this.miniprogramArr.length>0&&this.miniprogramArr.length==this.miniprogram.length?this.miniprogramAllCheck.checked=!0:this.miniprogramAllCheck.checked=!1,console.log("this.miniprogramArr",this.miniprogramArr)):"aut"==r&&(this.authorizeArr=t.detail.value,this.authorizeArr.length>0&&this.authorizeArr.length==this.authorize.length?this.authorizeArrCheck.checked=!0:this.authorizeArrCheck.checked=!1)},changeAll:function(r,t){var e=t.detail.value;if("min"==r)if("all"==e[0]){this.miniprogramAllCheck.checked=!0;var i,n=a(this.miniprogram);try{for(n.s();!(i=n.n()).done;){var o=i.value,u=String(o.id);this.miniprogramArr.includes(u)||this.miniprogramArr.push(u)}}catch(d){n.e(d)}finally{n.f()}}else this.miniprogramAllCheck.checked=!1,this.miniprogramArr=[];else if("aut"==r)if("all"==e[0]){this.authorizeArrCheck.checked=!0;var c,s=a(this.authorize);try{for(s.s();!(c=s.n()).done;){var h=c.value,l=String(h.id);this.authorizeArr.includes(l)||this.authorizeArr.push(l)}}catch(d){s.e(d)}finally{s.f()}}else this.authorizeArrCheck.checked=!1,this.authorizeArr=[]},previous:function(){var t=getCurrentPages(),e=t[t.length-2];r.navigateBack({success:function(){e.onLoad()}})},add:function(){var t=this;if(this.edit.data){if(this.form.password!==this.againPassword)return void r.showToast({title:"两次输入密码不同",icon:"none",duration:2e3});this.http({url:this.api.new_editStaff,method:"POST",data:i({uid:this.common.get("uid"),type:2,staff_id:this.data.id,miniprogram:this.miniprogramArr,authorize:this.authorizeArr},this.form),success:function(r){t.previous()}})}else{if(this.form.password!==this.againPassword)return void r.showToast({title:"两次输入密码不同",icon:"none",duration:2e3});this.http({url:this.api.new_addStaff,method:"POST",data:i({uid:this.common.get("uid"),miniprogram:this.miniprogramArr,authorize:this.authorizeArr},this.form),success:function(r){t.previous()}})}}}};t.default=c}).call(this,e("d5d0")["default"])},"1f57":function(r,t,e){},"8f5c":function(r,t,e){"use strict";e.r(t);var i=e("c422"),n=e("ba40");for(var a in n)"default"!==a&&function(r){e.d(t,r,(function(){return n[r]}))}(a);e("eab3");var o,u=e("f0c5"),c=Object(u["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports},ba40:function(r,t,e){"use strict";e.r(t);var i=e("0071"),n=e.n(i);for(var a in i)"default"!==a&&function(r){e.d(t,r,(function(){return i[r]}))}(a);t["default"]=n.a},c422:function(r,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var i={uniEasyinput:function(){return e.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(e.bind(null,"3c6f"))}},n=function(){var r=this,t=r.$createElement,e=(r._self._c,r.__map(r.miniprogram,(function(t,e){var i=r.__get_orig(t),n=r.miniprogramArr.includes(String(t.id));return{$orig:i,g0:n}}))),i=r.__map(r.authorize,(function(t,e){var i=r.__get_orig(t),n=r.authorizeArr.includes(String(t.id));return{$orig:i,g1:n}}));r.$mp.data=Object.assign({},{$root:{l0:e,l1:i}})},a=[]},ce7c:function(r,t,e){"use strict";(function(r){e("2e6c");i(e("dc04"));var t=i(e("8f5c"));function i(r){return r&&r.__esModule?r:{default:r}}wx.__webpack_require_UNI_MP_PLUGIN__=e,r(t.default)}).call(this,e("97ff")["createPage"])},eab3:function(r,t,e){"use strict";var i=e("1f57"),n=e.n(i);n.a}},[["ce7c","common/runtime","common/vendor"]]]);